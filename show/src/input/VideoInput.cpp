#include "VideoInput.h"

VideoInput::VideoInput() {
}

void VideoInput::setup() {
}

void VideoInput::update() {
    video.update();
}

void VideoInput::draw() {
    float w = ofGetWidth()/2;
    float h = video.getHeight() * (w / video.getWidth());
    video.draw(0, 0, w, h);
}

void VideoInput::exit() {
}

//////////////////////////////////////////////////////////////////////////////////
// public
//////////////////////////////////////////////////////////////////////////////////
ofPixelsRef VideoInput::getPixelsRef() {
    if (!getIsReady()) ofLogWarning() << "VideoInput::getPixelsRef grabber is not ready";
    return video.getPixelsRef();
}

bool VideoInput::isFrameNew() {
    return video.isFrameNew();
}

bool VideoInput::getIsReady() {
    return (video.isLoaded());
}

void VideoInput::start(){
    ofLogNotice() << "VideoInput::start";
    stop();
    video.loadMovie("videos/dome.mov");
    video.setLoopState(OF_LOOP_NORMAL);
    video.play();
}

void VideoInput::stop(){
    if (video.isLoaded()) {
        ofLogNotice() << "VideoInput::stop";
        video.stop();
        video.close();
    }
}
//////////////////////////////////////////////////////////////////////////////////
// protected
//////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////
// private
//////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////
// custom event handlers
//////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////
// oF event handlers
//////////////////////////////////////////////////////////////////////////////////
