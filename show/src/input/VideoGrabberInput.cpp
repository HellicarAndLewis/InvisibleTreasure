//
//  VideoGrabberInput.cpp
//  show
//
//  Created by Chris Mullany on 21/09/2015.
//
//

#include "VideoGrabberInput.h"

VideoGrabberInput::VideoGrabberInput() {
}

void VideoGrabberInput::setup() {
}

void VideoGrabberInput::update() {
    grabber.update();
}

void VideoGrabberInput::draw() {
    float w = ofGetWidth()/2;
    float h = grabber.getHeight() * (w / grabber.getWidth());
    grabber.draw(0, 0, w, h);
}

//////////////////////////////////////////////////////////////////////////////////
// public
//////////////////////////////////////////////////////////////////////////////////
ofPixelsRef VideoGrabberInput::getPixelsRef() {
    if (!getIsReady()) ofLogWarning() << "VideoGrabberInput::getPixelsRef grabber is not ready";
    return grabber.getPixelsRef();
}

bool VideoGrabberInput::isFrameNew() {
    return grabber.isFrameNew();
}

bool VideoGrabberInput::getIsReady() {
    return (grabber.isInitialized());
}

void VideoGrabberInput::start(){
    ofLogNotice() << "VideoGrabberInput::start";
    grabber.initGrabber(640, 480);
}

void VideoGrabberInput::stop(){
    if (grabber.isInitialized()) {
        ofLogNotice() << "VideoGrabberInput::stop";
        grabber.close();
    }
}
//////////////////////////////////////////////////////////////////////////////////
// protected
//////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////
// private
//////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////
// custom event handlers
//////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////
// oF event handlers
//////////////////////////////////////////////////////////////////////////////////
