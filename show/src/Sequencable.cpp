//
//  Sequencable.cpp
//  show
//
//  Created by Chris Mullany on 04/09/2015.
//
//

#include "Sequencable.h"

void Sequencable::update() {
    progress = tween.update();
    if (tween.isCompleted()) {
        if (state == INTRO) setState(INTERACTIVE);
        if (state == OUTRO) setState(INACTIVE);
    }
}

//////////////////////////////////////////////////////////////////////////////////
// public
//////////////////////////////////////////////////////////////////////////////////
void Sequencable::setState(State state) {
    this->state = state;
    ofNotifyEvent(stateChangeEvent, state, this);
    if (state == INTRO || state == OUTRO) {
        progress = 0;
        unsigned delay = 0;
        unsigned duration = 1000;
        tween.setParameters(easinglinear,ofxTween::easeOut,0,1,duration,delay);
        tween.start();
    }
}

void Sequencable::play() {
    setState(INTRO);
}
void Sequencable::stop() {
    setState(OUTRO);
}

//////////////////////////////////////////////////////////////////////////////////
// protected
//////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////
// private
//////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////
// custom event handlers
//////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////
// oF event handlers
//////////////////////////////////////////////////////////////////////////////////

